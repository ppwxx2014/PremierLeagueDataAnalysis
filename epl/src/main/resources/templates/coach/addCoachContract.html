<!doctype html>
<html class="no-js" lang="" xmlns:th="http://www.thymeleaf.org" >

<head>

	<title>Template</title>
	<th:block th:include = "template/part/headLayout"></th:block>
	<link rel ="stylesheet" type = "text/css" href = "/datepicker.css" >
</head>	

<body>
    <!-- Left Panel -->
    	<th:block th:include = "template/part/aside"></th:block>
    <!-- /#left-panel -->
    
    <!-- Right Panel -->
    <div id="right-panel" class="right-panel">
        <!-- Header-->
        	<div th:include ="template/part/topBar::topBar"></div>
        <!-- /#header -->
        <!-- 경로 표시 -->
		<div class="breadcrumbs">
			<div class="breadcrumbs-inner">
				<div class="row m-0">
					<div class="col-sm-4">
						<div class="page-header float-left">
							<div class="page-title">
								<h1>
									<font style="vertical-align: inherit;"><font
										style="vertical-align: inherit;">감독 추가</font></font>
								</h1>
							</div>
						</div>
					</div>
					<div class="col-sm-8">
						<div class="page-header float-right">
							<div class="page-title">
								<ol class="breadcrumb text-right">
									<li><a href="adminIndex"><font
											style="vertical-align: inherit;"><font
												style="vertical-align: inherit;">홈</font></font></a></li>
									<li><a href="#"><font style="vertical-align: inherit;"><font
												style="vertical-align: inherit;">감독</font></font></a></li>
									<li class="active"><font style="vertical-align: inherit;"><font
											style="vertical-align: inherit;">감독 계약 추가</font></font></li>
								</ol>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- /#경로 표시 -->
        <!-- Content -->
		<div class="content">
			<div class="card">
				<div class="card-header">
					<strong><font style="vertical-align: inherit;"><font
							style="vertical-align: inherit;">감독 계약 </font></font></strong><font
						style="vertical-align: inherit;"><font
						style="vertical-align: inherit;"> 입력 </font></font>
				</div>
				<div class="card-body card-block">

					<div class="row form-group">
						<div class="col col-md-3">
							<label for="text-input" class=" form-control-label"> <font
								style="vertical-align: inherit;"> <font
									style="vertical-align: inherit;">감독 : </font>
							</font>
							</label>
						</div>
						<div class="col-12 col-md-9">
							<select name="select" id="coachNo" class="form-control">
   								<option value="none">::: 감독 선택 :::</option>
							</select>
						</div>
					</div>
					<div class="row form-group">
						<div class="col col-md-3">
							<label for="text-input" class=" form-control-label"> <font
								style="vertical-align: inherit;"> <font
									style="vertical-align: inherit;">계약 팀 : </font>
							</font>
							</label>
						</div>
						<div class="col-12 col-md-9">
							<select name="select" id="teamName" class="form-control">
   								<option value="none">::: 팀 선택 :::</option>
							</select>
						</div>
					</div>
					<div class="row form-group">
						<div class="col col-md-3">
							<label for="text-input" class=" form-control-label"> <font
								style="vertical-align: inherit;"> <font
									style="vertical-align: inherit;">연봉($) : </font>
							</font>
							</label>
						</div>
						<div class="col-12 col-md-9">
							<input type="number" id="salary" name="text-input" min="0"
								class="form-control">
						</div>
					</div>
					<div class="row form-group">
						<div class="col col-md-3">
							<label for="text-input" class=" form-control-label"> <font
								style="vertical-align: inherit;"> <font
									style="vertical-align: inherit;">계약일 : </font>
							</font>
							</label>
						</div>
						<div class="col-12 col-md-9">
							<input type="date" id="contractStart" name="text-input"
								class="form-control">
						</div>
					</div>
					<div class="row form-group">
						<div class="col col-md-3">
							<label for="text-input" class=" form-control-label"> <font
								style="vertical-align: inherit;"> <font
									style="vertical-align: inherit;">계약 종료일 : </font>
							</font>
							</label>
						</div>
						<div class="col-12 col-md-9">
							<input type="date" id="contractEnd" name="text-input"
								class="form-control">
						</div>
					</div>
					<button type="button" class="btn btn-lg btn-info btn-block" id="add"><font
							style="vertical-align: inherit;"><font
							style="vertical-align: inherit;"> 입력</font></font>
					</button>
				</div>
			</div></div>
			<!-- <h1 class="container" style='width:400px;'>AddCoachContract</h1>
			<div class="container" style='width:400px;'>
				CoachName
				<div>
					<select id = "coachNo" class ="form-control form-control-sm">
									
					</select>
				</div>

			</div>
			<div class="container" style='width:400px;'>
				TeamName
				<div>
					<select id ="teamName" class ="form-control form-control-sm">
							
					</select>
				</div>
			</div>
			<div class="container" style='width:400px;'>
				Salary
				<input type = "number" name = "salary" id ="salary" min="0" class ="form-control">숫자만 입력가능하게 수정
			</div>
			<div class="container" style='width:400px;'>
				ContractStart
				<input type = "text" name = "contractStart" id = "contractStart" class ="form-control">
			</div>
			<div class="container" style='width:400px;'>
				ContractEnd
				<input type = "text" name = "contractEnd" id = "contractEnd" class ="form-control">
			</div>
			<div class="container" style='width:400px;'>
				<button type = "submit" id = "add" class="btn btn-success">Add CoachContract</button>
			</div>
		</div> -->
        <!-- /.content -->		
        
        
        <div class="clearfix"></div>
        
        <!-- Footer -->
    	<div th:include ="template/part/footer::footer"></div>
        <!-- /Footer -->
        
    </div>
    <!-- /#right-panel -->

    

    <!--Local Stuff-->
    <script>
    $("#contractStart").datepicker({
		dateFormat: 'yy-mm-dd',
		changeMonth: true, // 월을 바꿀수 있는 셀렉트 박스를 표시한다.
	
		changeYear: true, // 년을 바꿀 수 있는 셀렉트 박스를 표시한다.
		minDate: '-100y', //현재 년부터 100년 전까지
		yearRange: 'c-100:c+10', // 년도 선택 셀렉트박스를 현재 년도에서 이전, 이후로 얼마의 범위를 표시할것인가.
		 onClose: function( selectedDate ) {    
             // 시작일(contractStart) datepicker가 닫힐때
             // 종료일(contractEnd)의 선택할수있는 최소 날짜(minDate)를 선택한 시작일로 지정
             $("#contractEnd").datepicker( "option", "minDate", selectedDate );
         }       

	});
	$("#contractEnd").datepicker({
		dateFormat: 'yy-mm-dd',
		changeMonth: true, // 월을 바꿀수 있는 셀렉트 박스를 표시한다.
	
		changeYear: true, // 년을 바꿀 수 있는 셀렉트 박스를 표시한다.
		minDate: '-100y',
		yearRange: 'c-100:c+10', // 년도 선택 셀렉트박스를 현재 년도에서 이전, 이후로 얼마의 범위를 표시할것인가.
		
		onClose: function( selectedDate ) {
            // 종료일(contractEnd) datepicker가 닫힐때
            // 시작일(contractStart)의 선택할수있는 최대 날짜(maxDate)를 선택한 종료일로 지정 
            $("#contractStart").datepicker( "option", "maxDate", selectedDate );
        }                
		
	});
	//감독의 리스트를 출력
		$.ajax({
			url:"/getCoachList",
			method:"POST",
			success:function(json){
				$("#coachNo").empty();
				$(json).each(function(index, item){
					temp = "<option value = '";
					temp += item.coachNo;
					temp += "'>";
					temp += item.coachName;
					temp += "</option>";
					$("#coachNo").append(temp);
				});
			}
		});
		//팀리스트 출력
		$.ajax({
			url:"/getTeamList",
			method:"POST",
			success:function(json){
				$("#teamName").empty();
				$(json).each(function(index, item){
					temp = "<option value = '";
					temp += item.teamName;
					temp += "'>";
					temp += item.teamName;
					temp += "</option>";
					$("#teamName").append(temp);
				});
			}
		});
	//입력한 정보를 db에 저장
	$("#add").click(function(){
		console.log("coachNo:"+$("#coachNo").val());
		console.log("teamName:"+$("#teamName").val());
		console.log("salary:"+$("#salary").val());
		console.log("contractStart:"+$("#contractStart").val());
		console.log("contractEnd:"+$("#contractEnd").val());
		if($("#salary").val()==""||$("#contractStart").val()==""||$("#contractEnd").val()==""){
			alert("정보를 모두 입력해주세요");
		}else{
		$.ajax({
			url:"/addCoachContract",
			method:"POST",
			data:{"coachNo" : $("#coachNo").val(),
					"teamName" : $("#teamName").val(),
					"salary" : $("#salary").val(),
					"contractStart" : $("#contractStart").val(),
					"contractEnd" : $("#contractEnd").val()
			},
			success:function(json){
				alert("add contract");
				location.href="/adminIndex"
			}
		});
		}
	});
    </script>
</body>
</html>